% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/forest.R
\name{fplot}
\alias{fplot}
\title{forest}
\usage{
fplot(
  dat,
  nrows = 1,
  ncols = NA,
  nns = NA,
  lheights = c(0.1, 1, 0.05),
  lwidths = NA,
  y.at = NA,
  font = NA,
  arrow = TRUE,
  arrow_length = 0.05,
  arrow_angle = 30,
  cap_length = 0,
  shift_label_col = 0,
  center_label_col = NA,
  shift_textbeta_col = 0,
  shift_ymax = 0,
  shift_ymin = 0,
  xlab = NA,
  xlab_text = NA,
  xlim = NA,
  xlab_cex = 0.6,
  xlab_line = -0.5,
  tck = -0.04,
  shift_xaxis = 0,
  xtitle = NA,
  lwd = 1,
  pcol = rgb(0.1, 0.1, 0.1, 0.2),
  lscale = c("no", "yes"),
  ps = NA,
  header = NA,
  ref = list(x = NA, extend = 0, lty = 2, col = "grey50", lwd = lwd),
  bottomline = NA,
  headline = NA,
  headline_pos = c(0, 1),
  beta2 = NULL,
  xlab2 = NA,
  xlab_text2 = NA,
  xlim2 = NA,
  xtitle2 = NA,
  ...
)
}
\arguments{
\item{dat}{data frame with variables called
vlabel (labels), nx with x=1,2,... (num or chr columns with strings, e.g. number of observations or descriptives),
beta, beta_lci, beta_uci (num columns with point estimates and confidence interval)
optionally beta_format (num or chr column with formatted text to be printed along forest, generated from beta if not given)
px with x=1,2,.. (num or chr columns with p-value(s))}

\item{nrows}{number of rows, setting for layout, default is 1}

\item{ncols}{number of columns, setting for layout, typically derived from the data}

\item{nns}{number of n columns, derived from data if not given}

\item{lheights}{lheights: relative height of rows, length is typically 3 (header, data ,footer)}

\item{lwidths}{lwidths: relative width of columns, length correpsonds to columns in forest plus 2 (left and right margin)}

\item{y.at}{position of lines, 1:nrow(dat) by default}

\item{font}{font for variable vlabel, length has to correspond to rows of dat, default is rep(1,nrow(dat))}

\item{arrow}{logical, whether to use arrows if xlim does not include confidence interval limits}

\item{arrow_length}{length of the edges of the arrow head (in inches)}

\item{arrow_angle}{angle from the shaft of the arrow to the edge of the arrow head}

\item{cap_length}{length of the confidence interval cap, 0 if none}

\item{shift_label_col}{inset of labels in the first column, default is 0}

\item{center_label_col}{centering of label in first column}

\item{shift_textbeta_col}{inset of formatted effects (beta_format)}

\item{shift_ymax}{down-shift of maximal y-value, smaller space to top}

\item{shift_ymin}{up-shift of minimal y-value, smaller space to bottom}

\item{xlab}{position of labels for x-axis, derived from beta by default}

\item{xlab_text}{text at the labels, derived from beta by default}

\item{xlim}{limits for x-axis in forest plots, derived from beta by default}

\item{xlab_cex}{size of x-axis labels (not title)}

\item{xlab_line}{position of x-axis label (not title)}

\item{tck}{x-axis tick length}

\item{shift_xaxis}{shift position of x-axis}

\item{xtitle}{x axis title and format,
list with x (xpos), y (ypos), textr and textl (text at the right/left side), cex (text size)}

\item{lwd}{line widths}

\item{pcol}{color if symbols are used, not active}

\item{lscale}{beta given on log scale, use exp to format beta, default is no}

\item{ps}{points for plot, list with pch, cex, and col}

\item{header}{for table, either a character vector or a list with any of
x (vector with xpos), y (single y-position), text (character vector with labels), cex (text size),
the list can be >1 to define more than one header line}

\item{ref}{reference line, list with x (xposition), extend (extension on top), lty (line type), col (line color), lwd (line width)}

\item{bottomline}{lines at the bottom if not NA}

\item{headline}{1 line for header if not NA, 2 lines if 2}

\item{headline_pos}{vector with position of lower and upper headline (if applicable), default c(0,1)}

\item{beta2}{if not NULL a second forest is generated, needs variables beta2, beta2_lci and beta2_uci in dat}

\item{xlab2}{see xlab for 2nd forest}

\item{xlab_text2}{see xlab_text for 2nd forest}

\item{xlim2}{see xlim for 2nd forest}

\item{xtitle2}{see xtitle for 2nd forest}

\item{...}{options passed to ff_ci for formatting the effects (if beta_format not goven)}
}
\value{
forest plot
}
\description{
produces forest plots
}
\details{
required input is a data frame with a column called vlabel, beta, beta_lci and beta_uci.
}
\examples{
data(forplotdata)
# Minimal example
fplot(dat=forplotdata[,c("vlabel","beta","beta_lci","beta_uci")])

# Standard example
fplot(dat=forplotdata)

# Set widths and heights
lwidths<-c(0.05,0.5,0.2,0.8,0.2,0.8,1.2,1.2,0.5,0.05)
lheights<-c(0.15,1,0.04)
fplot(dat=forplotdata,lwidths=lwidths,lheights=lheights)


# Include header:
header<-c("","Group1\nN","Group0\nmean (sd)","Group2\nN","Group2\nmean (sd)",
"Mean difference\n95\% CI","","P-value")
fplot(dat=forplotdata,lwidths=lwidths,lheights=lheights,header=header)


## more options for header
header1<-list(y=0.5,cex=1.2,text=header)
fplot(dat=forplotdata,header=header1,lwidths=lwidths,lheights=lheights)

header2<-list(y=0.5,cex=1.0,text=header,x=c(0,0.1,0.2,0.3,0.4,0.7,0,0.98))
fplot(dat=forplotdata,header=header2,lwidths=lwidths,lheights=lheights)

header3<-list(list(y=0.6,
	text=c("Group1","Group2","Mean difference (95\% CI)","P-value"),
	x=c(0.15,0.35,0.7,0.98)),
	list(y=0.3,text=c("N","mean (sd)","N","mean (sd)"),
	x=c(0.1,0.2,0.3,0.4)))
fplot(dat=forplotdata,header=header3,lwidths=lwidths,lheights=lheights)

# x-axis and label of plots
xtitle<-list(x=0.85,y=0.4,textl="Group 1 better    ",textr="    Group 2 better")
fplot(dat=forplotdata,header=header3,lwidths=lwidths,lheights=lheights,
xtitle=xtitle,ref=list(x=0),xlim=c(-1,0.5))

xtitle<-list(x=0.85,y=0.8,textl="Group 1 better    ",textr="    Group 2 better")
fplot(dat=forplotdata,header=header3,lwidths=lwidths,lheights=lheights,
	ref=list(x=0,col=1,extend=0.5),
	shift_ymin=0.3,
	shift_xaxis=0.5,xlab_line=-1.6,xlab_cex=0.7,
	xtitle=xtitle,xlim=c(-1,0.5))

# Format points
ps<-list(pch=16,cex=rnorm(10,2,0.2),col=1)
fplot(dat=forplotdata,header=header,lwidths=lwidths,lheights=lheights,ps=ps)

# Lines at header
fplot(dat=forplotdata,header=header,lwidths=lwidths,lheights=lheights,
	headline=1)
fplot(dat=forplotdata,header=header,lwidths=lwidths,lheights=lheights,
	headline=2,bottomline=1)

#Plot window size
dev.new(width=6,height=4,pointsize=14)
lwidths<-c(0.05,0.5,0.2,0.8,0.2,0.8,1.2,1.2,0.5,0.05)
lheights<-c(0.12,1,0.04)
header3<-list(list(y=0.7,
	text=c("Group1","Group2","Mean difference (95\% CI)","P-value"),
	x=c(0.15,0.35,0.7,0.98)),
	list(y=0.3,text=c("N","mean (sd)","N","mean (sd)"),
	x=c(0.1,0.2,0.3,0.4)))
xtitle<-list(x=0.85,y=0.8,textl="Group 1 better    ",textr="    Group 2 better")
fplot(dat=forplotdata,header=header3,lwidths=lwidths,lheights=lheights,
	ref=list(x=0),
	cap_length=0.03,
	shift_xaxis=0.5,xlab_line=-1.4,
	xtitle=xtitle,xlim=c(-1,0.5),
	headline=2,bottomline=1)


}
